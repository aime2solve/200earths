<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparative Biospheromics</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            background-color: #000000;
            font-family: 'Exo 2', sans-serif;
            overflow: hidden;
        }
        h1 {
            color: #00FFFF;
            text-align: center;
            text-shadow: 0 0 10px #00FFFF;
            padding: 1vh;
            font-family: 'Orbitron', sans-serif;
            font-size: calc(16px + 2vw);
        }
        .graph-container {
            width: 90%;
            height: 75vh;
            margin: 2vh auto;
            position: relative;
            background-color: #1A1A1A;
        }
        #graph {
            width: 100%;
            height: 100%;
        }
        #graph::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                rgba(0, 255, 255, 0.06),
                rgba(0, 255, 255, 0.06) 2px,
                transparent 2px,
                transparent 4px
            );
            pointer-events: none;
            z-index: 10;
        }
    </style>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Comparative Biospheromics</h1>
    <div class="graph-container">
        <div id="graph"></div>
    </div>

    <script>
        console.log('Script started');

        // Hardcoded data
        const data = [
            { Ecotron: 'Forest_1', CO2_Level: 450, Plant_Growth_Rate: 1.2 },
            { Ecotron: 'Grassland_2', CO2_Level: 420, Plant_Growth_Rate: 0.9 },
            { Ecotron: 'Forest_3', CO2_Level: 460, Plant_Growth_Rate: 1.3 },
            { Ecotron: 'Grassland_4', CO2_Level: 430, Plant_Growth_Rate: 0.8 }
        ];
        console.log('Hardcoded Data:', data);

        function layoutConfig(title = 'Plant Growth Rate vs CO2 Level') {
            console.log('Generating layout with title:', title);
            return {
                plot_bgcolor: '#1A1A1A',
                paper_bgcolor: '#1A1A1A',
                font: {color: '#FFFFFF', family: 'Exo 2', sans-serif', size: 14},
                title: {
                    text: title,
                    font: {size: 24, color: '#00FFFF', family: 'VT323', monospace'},
                    x: 0.05,
                    xanchor: 'left',
                    y: 0.95,
                    yanchor: 'top'
                },
                xaxis: {title: 'CO2 Level (ppm)', gridcolor: '#333333', automargin: true},
                yaxis: {title: 'Plant Growth Rate (mm/day)', gridcolor: '#333333', automargin: true},
                legend: {font: {color: '#00FF00', size: 12, family: 'VT323', monospace'}, x: 0.01, y: 0.99, xanchor: 'left', yanchor: 'top'},
                margin: {l: 40, r: 40, t: 60, b: 40}
            };
        }

        function plotGraph() {
            console.log('Plotting graph');
            const traces = data.map(row => ({
                x: [row.CO2_Level],
                y: [row.Plant_Growth_Rate],
                mode: 'markers',
                name: row.Ecotron,
                marker: {size: 12, color: '#00FFFF', line: {width: 2, color: '#FFFFFF'}}
            }));
            console.log('Traces:', traces);

            if (traces.length === 0) {
                console.error('No traces to plot');
                Plotly.newPlot('graph', [], layoutConfig('No data to plot'));
                return;
            }

            Plotly.newPlot('graph', traces, layoutConfig())
                .then(() => console.log('Plot rendered successfully'))
                .catch(err => console.error('Plotly Error:', err));
        }

        plotGraph();
    </script>
</body>
</html>